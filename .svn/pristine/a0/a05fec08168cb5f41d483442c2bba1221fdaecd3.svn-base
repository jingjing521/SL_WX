<!doctype html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta content="width=device-width, minimum-scale=1,initial-scale=1, maximum-scale=1, user-scalable=1;" id="viewport" name="viewport" />
		<!--离线应用的另一个技巧-->
		<meta content="yes" name="apple-mobile-web-app-capable" />
		<!--指定的iphone中safari顶端的状态条的样式-->
		<meta content="black" name="apple-mobile-web-app-status-bar-style" />
		<!--告诉设备忽略将页面中的数字识别为电话号码-->
		<meta content="telephone=no" name="format-detection" />
		<title>聊天</title>
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<link href="css/demo.css" />
	</head>

	<body>
		<!-- 总体框架 -->
		<div class="index-bg">
			<div id="chat">
				<div class="webim-chatwindow ">
				
					<ul tabindex="-1" class="webim-group-memeber hide"></ul>
					<div id="wrapper121218837qq.com" class="webim-chatwindow-msg">
						<div class="webim-msg-container rel">
							<div data-reactroot="" class="rel right">
								<div class="webim-avatar-icon right small"><img class="w100" src="images/3.png"></div>
								<div class="clearfix fl">
									<div class="webim-msg-value"><span class="webim-msg-icon font">I</span><pre>loll</pre></div>
									<div class="webim-msg-error hide"><span class="webim-file-icon font smaller red">k</span></div>
								</div>
							</div>
						</div>
					</div>
					<div class="webim-send-wrapper">
						
						<ul class=" hide dqs">
							<li key="[):]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_1.png"></li>
							<li key="[:D]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_2.png"></li>
							<li key="[;)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_3.png"></li>
							<li key="[:-o]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_4.png"></li>
							<li key="[:p]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_5.png"></li>
							<li key="[(H)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_6.png"></li>
							<li key="[:@]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_7.png"></li>
							<li key="[:s]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_8.png"></li>
							<li key="[:$]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_9.png"></li>
							<li key="[:(]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_10.png"></li>
							<li key="[:'(]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_11.png"></li>
							<li key="[:|]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_12.png"></li>
							<li key="[(a)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_13.png"></li>
							<li key="[8o|]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_14.png"></li>
							<li key="[8-|]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_15.png"></li>
							<li key="[+o(]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_16.png"></li>
							<li key="[<o)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_17.png"></li>
							<li key="[|-)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_18.png"></li>
							<li key="[*-)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_19.png"></li>
							<li key="[:-#]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_20.png"></li>
							<li key="[:-*]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_21.png"></li>
							<li key="[^o)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_22.png"></li>
							<li key="[8-)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_23.png"></li>
							<li key="[(|)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_25.png"></li>
							<li key="[(S)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_26.png"></li>
							<li key="[(*)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_27.png"></li>
							<li key="[(#)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_28.png"></li>
							<li key="[(R)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_29.png"></li>
							<li key="[({)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_30.png"></li>
							<li key="[(})]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_31.png"></li>
							<li key="[(k)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_32.png"></li>
							<li key="[(F)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_33.png"></li>
							<li key="[(W)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_34.png"></li>
							<li key="[(D)]" class="webim-emoji-item"><img src="css/demo/images/faces/ee_35.png"></li>
						</ul>
						<div class="hide wj">
							<div class="fl wj1 tp">
								<div class="webim-picture-icon font">K</div>
								<div class="name">图片</div>
							</div>
							<div class="fl wj1 wjs">
								<div class="webim-file-icon font ">S</div>
								<div class="name">文件</div>
							</div>
						</div>
						<textarea class="cons"></textarea>
						<div class="webim-chatwindow-options">
							<span class="webim-emoji-icon font smaller"><img src="images/chat (5).png"></span>
							<span class=" font smaller addfile"><img src="images/chat (1).png"></span>
							<!--<span class="webim-emoji-icon font smaller">J</span>
							<span class="webim-picture-icon font smaller">K</span>
							<span class="webim-audio-icon font smaller">R</span>
							<span class="webim-file-icon font smaller">S</span>-->
						</div>
						<button class="webim-button bg-color webim-send-btn base-bgcolor disabled">发送</button>
					</div>
				</div>
				<!--<div class="chat-con">
					<div class="chat-con-item">
						<div class="fl chat-con-item-tx"><img src="images/3.png"></div>
						<div class="fl chat-con-item-text">请问你有什么需要帮助的吗？</div>
						<div class="clear"></div>
					</div>
					<div class="chat-con-items">
						<div class="fr chat-con-item-tx"><img src="images/3.png"></div>
						<div class="fr chat-con-item-texts">价格太高</div>
						<div class="clear"></div>
					</div>
					<div class="chat-con-item">
						<div class="fl chat-con-item-tx"><img src="images/3.png"></div>
						<div class="fl chat-con-item-text">这个价格还好吧。</div>
						<div class="clear"></div>
					</div>
					<div class="chat-con-items">
						<div class="fr chat-con-item-tx"><img src="images/3.png"></div>
						<div class="fr chat-con-item-texts">能低一点吗？</div>
						<div class="clear"></div>
					</div>
					<div class="chat-con-item">
						<div class="fl chat-con-item-tx"><img src="images/3.png"></div>
						<div class="fl chat-con-item-text">好的。</div>
						<div class="clear"></div>
					</div>
					<div class="chat-con-items">
						<div class="fr chat-con-item-tx"><img src="images/3.png"></div>
						<div class="fr chat-con-item-texts">谢谢亲</div>
						<div class="clear"></div>
					</div>
					
				</div>
				<div class="zw50"></div>
				<div class="chat-footer">
					
					<div class="fl chat-footer-input"><input type="text" placeholder="请输入内容" value="" class="cons"></div>
					<div class="fl chat-footer-img bqs"><img src="images/chat (5).png"></div>
					<div class="fl chat-footer-img hides"><img src="images/chat (1).png"></div>
					<div class="fl chat-footer-imgs" style="display: none;">发送</div>
					<div class="clear"></div>
				</div>-->
			</div>
			<!--<div class="wj" style="display: none;">
				<div class="fl wj1 tp">
					<div class="imgs"><img src="images/tu.png"></div>
					<input type="file" id="image" style="display: none;" />
					<div class="name">图片</div>
				</div>
				<div class="fl wj1 wjs">
					<div class="imgs"><img src="images/tu1.png"></div>
					<div class="name">文件</div>
				</div>
			</div>
			<div class="bq" style="display: none;">
				<ul class="">
					
				</ul>
			</div>-->
		</div>
		
	</body>
	<script src="js/webim.config.js"></script>
	<script src="js/strophe-1.2.8.min.js"></script>
	<script src="js/websdk-1.4.10.min.js"></script>
	<script src="js/adapter.js"></script>
	<script src="js/webrtc-1.4.10.js"></script>
	<script type="text/javascript" src="js/jquery-2.2.1.js"></script>
	<!--<script src="js/common.js"></script>-->
	<script>
//	$(document).ready(function() {
//		var w = $(window).height();
//		var h = $(".chat-footer").height();
//		var num = parseInt(w - h);
//		$(".chat-con").css("min-height", num);
//	})
$(".cons").keyup(function() {
	if($(".cons").val() != "") {
		$(".webim-send-btn").show();
		$(".addfile").hide();
	} else {
		$(".addfile").show();
		$(".webim-send-btn").hide();
	}
})
$(".webim-emoji-icon").click(function(){
	$(".dqs").removeClass("hide");
	var h=$(".dqs").height();
	$(".webim-chatwindow textarea").css("bottom",h+15);
	$(".webim-chatwindow-options").css("bottom",h+15)
	$(".webim-send-btn").css("bottom",h+5)
})
$(".webim-chatwindow-msg").click(function(){
	$(".dqs").addClass("hide");
	$(".wj").addClass("hide");
	$(".webim-chatwindow textarea").css("bottom",10);
	$(".webim-chatwindow-options").css("bottom",10)
	$(".webim-send-btn").css("bottom",0)
})
$(".addfile").click(function(){
	$(".wj").removeClass("hide");
	var h=$(".wj").height();
	$(".webim-chatwindow textarea").css("bottom",h+25);
	$(".webim-chatwindow-options").css("bottom",h+25)
})

$(".dqs").on("click","li",function(){
	$(this).attr("key");
	$(".cons").val($(this).attr("key"));
	$(".webim-send-btn").show();
	$(".addfile").hide();
})

//$(".bqs").click(function(){
//	$(".bq").show();
//	var h = $(".bq").height();
//	$(".chat-footer").css("bottom", h + 21);
//})
//$(".bq").on("click","li",function(){
//	$(this).attr("key");
//	$(".cons").val($(this).attr("key"));
//	$(".chat-footer-imgs").show();
//	$(".hides").hide();
//})
//
//$(".chat-footer-imgs").click(function() {
//	$(".hides").show();
//	$(".chat-footer-imgs").hide();
//	var value = $(".cons").val();
//	if(value == "") {
//		$(".hides").show();
//		$(".chat-footer-imgs").hide();
//	}
//	$(".chat-con").append('<div class="chat-con-items"><div class="fr chat-con-item-tx"><img src="images/3.png"></div><div class="fr chat-con-item-texts">' + value + '</div><div class="clear"></div></div>');
//	$(".cons").val("");
//	sendPrivateText() ;
//})
//
//$(".hides").click(function() {
//	var h = $(".wj").height();
//	$(".chat-footer").css("bottom", h + 21);
//	$(".wj").show();
//	$(".bq").hide();
//})
//
//$(".chat-con").click(function() {
//	$(".wj").hide();
//	$(".bq").hide();
//	$(".chat-footer").css("bottom", 0);
//})
//
//$(".tp").click(function(){
//	$("#image").click();
//	sendPrivateImg();
//})
//
//$(".wjs").click(function(){
//	sendPrivateFile();
//})
//
//// 单聊发送文件消息
//function sendPrivateFile() {
//	alert(55);
//  var id = conn.getUniqueId();                   // 生成本地消息id
//  var msg = new WebIM.message('file', id);        // 创建文件消息
//  var input = document.getElementById('file');  // 选择文件的input
//  var file = WebIM.utils.getFileUrl(input);      // 将文件转化为二进制文件
//  var allowType = {
//      'jpg': true,
//      'gif': true,
//      'png': true,
//      'bmp': true,
//      'zip': true,
//      'txt': true,
//      'doc':true,
//      'pdf': true
//  };
//  if (file.filetype.toLowerCase() in allowType) {
//      var option = {
//          apiUrl: WebIM.config.apiURL,
//          file: file,
//          to: 'username',                       // 接收消息对象
//          roomType: false,
//          chatType: 'singleChat',
//          onFileUploadError: function () {      // 消息上传失败
//              console.log('onFileUploadError');
//          },
//          onFileUploadComplete: function () {   // 消息上传成功
//              console.log('onFileUploadComplete');
//          },
//          success: function () {                // 消息发送成功
//              console.log('Success');
//          },
//          flashUpload: WebIM.flashUpload
//      };
//      msg.set(option);
//      conn.send(msg.body);
//  }
//};
//// 单聊发送图片消息
//function sendPrivateImg() {
//	alert(11);
//  var id = conn.getUniqueId();                   // 生成本地消息id
//  var msg = new WebIM.message('img', id);        // 创建图片消息
//  var input = document.getElementById('image');  // 选择图片的input
//  var file = WebIM.utils.getFileUrl(input);      // 将图片转化为二进制文件
//  var allowType = {
//      'jpg': true,
//      'gif': true,
//      'png': true,
//      'bmp': true
//  };
//  if (file.filetype.toLowerCase() in allowType) {
//      var option = {
//          apiUrl: WebIM.config.apiURL,
//          file: file,
//          to: 'username',                       // 接收消息对象
//          roomType: false,
//          chatType: 'singleChat',
//          onFileUploadError: function () {      // 消息上传失败
//              console.log('onFileUploadError');
//          },
//          onFileUploadComplete: function () {   // 消息上传成功
//              console.log('onFileUploadComplete');
//          },
//          success: function () {                // 消息发送成功
//              console.log('Success');
//          },
//          flashUpload: WebIM.flashUpload
//      };
//      msg.set(option);
//      conn.send(msg.body);
//  }
//};
//function sendPrivateText() {
//	alert(12);
//	var id = conn.getUniqueId(); // 生成本地消息id
//	var msg = new WebIM.message('txt', id); // 创建文本消息
//	msg.set({
//		msg: '你好你好', // 消息内容
//		to: '18991360884', // 接收消息对象（用户id）
//		roomType: false,
//		success: function(id, serverMsgId) {
//			console.log('send private text Success');
//		}
//	});
//	msg.body.chatType = 'singleChat';
//	conn.send(msg.body);
//};
</script>
</html>